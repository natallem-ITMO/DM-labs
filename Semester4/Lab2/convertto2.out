start: 	S
accept: END
reject: R
blank: _

S 0 -> END 0 ^
S 1 -> INIT 1 <
S 2 -> INIT 2 <

INIT _ -> INIT2 | <

INIT2 _ -> POINTFROMLEFT 0 >

POINTFROMLEFT | -> RIGHTEND | >
POINTFROMLEFT 1 -> POINTFROMLEFT 1 >
POINTFROMLEFT 0 -> POINTFROMLEFT 0 >

RIGHTEND 0 -> RIGHTEND 0 >
RIGHTEND 1 -> RIGHTEND 1 >
RIGHTEND 2 -> RIGHTEND 2 >
RIGHTEND _ -> MINUS _ <

MINUS 1 -> ADDTOPOINT 0 <
MINUS 2 -> ADDTOPOINT 1 <
MINUS 0 -> FINDNOTNULL 2 <

FINDNOTNULL 1 -> ADDTOPOINT 0 <
FINDNOTNULL 2 -> ADDTOPOINT 1 <
FINDNOTNULL 0 -> FINDNOTNULL 2 <
FINDNOTNULL | -> PREPARERESULT _ >

ADDTOPOINT 1 -> ADDTOPOINT 1 <
ADDTOPOINT 0 -> ADDTOPOINT 0 <
ADDTOPOINT 2 -> ADDTOPOINT 2 <
ADDTOPOINT | -> ADDONE | <

ADDONE 1 -> HASONE 0 <
ADDONE 0 -> POINTFROMLEFT 1 >

HASONE 1 -> HASONE 0 <
HASONE 0 -> POINTFROMLEFT 1 >
HASONE _ -> POINTFROMLEFT 1 >

PREPARERESULT 2 -> PREPARERESULT _ >
PREPARERESULT _ -> FINDBEGIN _ <

FINDBEGIN _ -> FINDBEGIN _ <
FINDBEGIN 0 -> FINDBEGIN2 0 <
FINDBEGIN 1 -> FINDBEGIN2 1 <

FINDBEGIN2 1 -> FINDBEGIN2 1 <
FINDBEGIN2 0 -> FINDBEGIN2 0 <
FINDBEGIN2 _ -> END _ >

